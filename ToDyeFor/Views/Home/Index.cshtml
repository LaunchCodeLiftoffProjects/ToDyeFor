@{
    ViewData["Title"] = "Home Page";
}
@using System.Security.Claims;
@using ToDyeFor.ViewModel;
@model CalculateMXRecipeViewModel;



<form method="post" asp-controller="Home" asp-action="Index">
    <div class="text-center">

        <div id="calculator" class="card">

            @*step 0*@
            <div class="tab" style="padding: 20px;">
                <h2>Welcome to <strong class="logo">To<div class="oleoSwash">Dye</div>For</strong>!</h2>
                <br />
                <h4>Click next to calculate your MX Reactive Dye recipe</h4>
                <p>or</p>
                <h5><a href="Home/About">click here</a> to learn more about us.</h5>

            </div>

            @*step 1*@
            <div class="tab">
                <p style="margin: 40px;">
                    <label asp-for="FabricWeight">
                        Weight of Fabric (grams)
                        <input class="form-control" asp-for="FabricWeight" id="quantity" placeholder="Weight in grams">
                    </label>
                </p>
                <span asp-validation-for="FabricWeight"></span>
            </div>


            @*step 2*@
            <div class="tab">
                <p>
                    <label asp-for="ShadeDepth">
                        Depth of Shade:
                    </label>

                    <div class="slidecontainer">
                        <input asp-for="ShadeDepth" type="range" min="0" max="8" step="0.1" value="5" class="slider" id="shade">
                        <br>Value: <span id="depth"></span> %
                    </div>

                </p>
                <span asp-validation-for="ShadeDepth"></span>
            </div>


            <div style="overflow:auto;">
                <div style="float:right;">
                    <button type="button" id="prevBtn" onclick="nextPrev(-1)" class="btn btn-outline-dark">Previous</button>
                    <button type="button" id="nextBtn" onclick="nextPrev(1)" class="btn btn-outline-dark">Next</button>
                </div>
            </div>

            <!-- Circles which indicate the steps of the form: -->
            <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
            </div>

        </div>

        <div id="results" style="display: none">
            <div id="calculateResults" class="cards">
                <div class="card">
                    <div id="dyeRecipe">
                        <table class="table">
                            <thead>
                                <tr><h4>Your recipe has been calculated!</h4></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Depth of Shade</th>
                                    <td id="shadeDepth"></td>
                                </tr>
                                <tr>
                                    <th>Weight of Fabric</th>
                                    <td id="fabricWeight"></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th>Salt Amount</th>
                                    <td id="saltCalc"></td>
                                </tr>
                                <tr>
                                    <th>Soda Ash Amount</th>
                                    <td id="sodaAshCalc"></td>
                                </tr>
                                <tr>
                                    <th>Water Amount</th>
                                    <td id="waterCalc"></td>
                                </tr>
                                <tr>
                                    <th>Dye Amount</th>
                                    <td id="dyeCalc"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p><button class="btn btn-outline-dark" onclick="printDiv('dyeRecipe')">Print Recipe</button>
                </div>


                <div class="card">
                    <h4>Would you like to save this recipe?</h4>

                    <label asp-for="Name">
                        Name <input class="form-control" asp-for="Name" id="recipeName">
                        <span asp-validation-for="Name"></span>
                    </label>

                    <label asp-for="Color">
                        Color <select class="form-control" asp-for="Color" asp-items="Model.ColorTypes" id="color"></select>
                    </label>
                    <label asp-for="DyeColor">
                        Dye Name <input class="form-control" asp-for="DyeColor" id="dye">
                        <span asp-validation-for="DyeColor"></span>
                    </label>

                    <label asp-for="Fabric">
                        Fabric/Fiber Type <select class="form-control" asp-for="Fabric" asp-items="Model.FabricTypes" id="fabric"></select>
                    </label>
                    <p><button type="submit" class="btn btn-success">Save Recipe</button></p>
                    @if (User.FindFirstValue(ClaimTypes.NameIdentifier) == null)
                    {
                        <p class="field-validation-error">WARNING:  You must be signed in to save this recipe. </p>
                    }
                </div>
            </div>
        </div>
    </div>
</form>


